      - name: Persist Intelligence Data
        run: |
          git config --local user.name "github-actions[bot]"
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          
          # 1. Use --ignore-unmatch to prevent errors if a file is missing
          # 2. Use 'git add .' to safely catch any new .db or .json files
          git add *.db sent_alerts.json performance.json || echo "Some files missing, skipping specific add..."
          
          # Autostash handles the local changes while pulling updates from main
          git pull --rebase --autostash origin main
          
          # Only commit if there are actual changes in the staging area
          if [ -n "$(git status --portion)" ]; then
            git commit -m "Intelligence Sync: $(date)"
            git push origin main
          else
            echo "No changes detected to commit."
          fi
